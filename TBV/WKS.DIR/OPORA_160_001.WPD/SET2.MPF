N1 G54
N2 WORKPIECE(,"",,"BOX",48,10,-208,-80,0,0,670,-530)
N3 G64 SOFT COMPON
N4 T="FR 80 GESAK"
N5 M6
N6 D1
N7 S600 M3 G94 F300
M8
;PLOSKOST 'A' (z=0) po koprke s prip
N8 CYCLE61(100,10,2,0.3,0,0,670,-530,3.5,80,0,300,11,0,1,11010)
N9 g0 z200 M5
N10 M9
N11 M0 

N12 T="HF66"
N13 m6
N14 d1
N15 m3 s900 g94 f7000 m7
;ploskost 'B' (z-45)
N16 r1=0.4 r2=-44.75 r3=0.8
N17 while r1>r2
N18  r1=r1-r3
N19  if r1<r2
N20    r1=r2
N21  endif
N22  g0 x-50 y-521
N23  z=r1
N24  g1 x690 rndm=10
N25  y-421
N26  x-10
N27  y-471
N28  x680
N29  y-321
N30  x-10
N31  y-371
N32  x680
N33  y-221
N34  x-10
N35  y-271
N36  x680
N37  y-121
N38  x-10
N39  y-171
N40  x690
N41  y-91
N42  x-40 rndm=0
N43 endwhile
N44 g0 z200
N45 M0

;ploskost 'C' (z-55)
N46 r1=-44.6 r2=-54.75 r3=0.8
N47 while r1>r2
N48  r1=r1-r3
N49  if r1<r2
N50    r1=r2
N51  endif
N52  g0 x-40 y-519
N53  z=r1
N54  g1 x680 rnd=10
N55  y-469 rnd=10
N56  x-40
N57 endwhile
N58 g0 z200
N59 m0

;USTUP 'D' (z-93)
N60 R1=-54.6 R2=-92.75 R3=.8
N61 WHILE R1>R2
N62 R1=R1-R3
N63 IF R1<R2
N64    R1=R2
N65 ENDIF
N66 g0 x-40 y-530
N67  z=r1
N68  g1 x680 rnd=10
N69  y-491 rnd=10
N70  x-40
N71 ENDWHILE
N72 G0 Z200
N73 M0

;PLOSKOST 'F' stenka 'G' (z-138)
N74 R1=-44.6 R2=-137.75 R3=.8
N75 WHILE R1>R2
N76  R1=R1-R3
N77  IF R1<R2 
N78     R1=R2
N79  ENDIF
N80  g0 x-40 y-229
N81  z=r1
N82  g1 x680 rndm=10
N83  y-183
N84  x-10
N85  y-275
N86  x680
N87  y-137
N88  x-10
N89  y-321
N90  x680
N91  y-91
N92  x-10
N93  y-367
N94  x720 rndm=0
N95 g0 z=ic(10)
N96 endwhile
N97 g0 z200
N98 m0

;PLOSKOST 'K' stenka ' naprotiv G' (z-143)
N99 R1=-137.6 R2=-142.75 R3=.8
N100 WHILE R1>R2
N101  R1=R1-R3
N102  IF R1<R2 
N103     R1=R2
N104  ENDIF
N105 g0 x-40 y-291
N106 z=r1
N107 g1 x680 rndm=10
N108 y-241
N109 x-10
N110 y-341
N111 x680
N112 y-215
N113 x-10
N114 y-367
N115 x680 rndm=0
N116 g0 z5
N117 endwhile
N118 g0 z200 M5
N119 M9
N120 m0

N121 T="KUKURUZA 50"
N122 m6
N123 d1
N124 m3 s900 g94 f600 m8
;obkat snaruji vokrug 'A' bez obkata 'G'
N125 g0 x-50 y-70
N126 z-53
N127 g1 x0 g41 OFFN=0
N128 y0 rnd=1
N129 x670 rnd=1
N130 y-70
N131 g0 x730 g40
N132 g0 z100
N133 m0
;obkat vokrug 'BCDE'
N134 g0 y-370
N135 z-95.75
N136 g1 x670 g41
N137 y-493 rnd=.5;PLOSKOST "E"
N138 x0 rnd=.5
N139 y-370
N140 x-50 g40
N141 g0 z50
N142 m0
;obkat vokrug 'E'
N143 x730 y-580
N144 z-145
N145 g1 y-530 g41
N146 x-40
N147 y-580 g40
N148 g0 z100 M5
N149 M9
N150 m0

N151 T="FR 50 L200"
N152 M6
N153 D1
N154 M3 S1300 G94 F1000
;stenka 'G' mera
N155 Y=-58-$P_TOOLR
N156 OFFN=0
N157 R1=0
N158 R2=-138
N159 R3=-143
N160 R4=3
N161 WHILE R1>R3
N162 R1=R1-R4
N163 IF R1<R3
N164    R1=R3
N165 ENDIF
N166 IF (R1<=R2) AND (R4>1) ;STEP DEGRESSIV DOWN R2
N167    R1=R2
N168    R4=1
N169 ENDIF
N170 G0 X=670+$P_TOOLR+20
N171 Z=R1+R4
N172 G1 Z=R1
N173 X=-$P_TOOLR-20
N174 G0 Z10
N175 ENDWHILE
N176 G0 Z100
N177 M1

;stenka vnutrennaya naprotiv 'G' (y-400)
N178 Y=-400+$P_TOOLR
N179 OFFN=0
N180 R1=-45
N181 R2=-142.75
N182 R3=3
N183 WHILE R1>R2
N184 R1=R1-R3
N185 IF R1<R2
N186    R1=R2
N187 ENDIF
N188 G0 X=-$P_TOOLR-20
N189 Z=R1+R3
N190 G1 Z=R1
N191 X=670+$P_TOOLR+20
N192 G0 Z10
N193 ENDWHILE
N194 G0 Z100
N195 M0
;ploskost 'K'
N196 CYCLE61(100,-136,2,-143,680,-182,-10,-400,6,40,0,500,32,1100,1,11000)
M0
N197 KARMAN2UHA
N198 M0

;DNO KARMANA 'L' MERA
N199 G0 X693.533 Y-299.15
N200 G1 Z-148 F4000
N201 X667 F1000
N202 X530.15
N203 Y-328.85
N204 X667
N205 G0 Z0
N206 X693.533 Y-279.15
N207 Z-147
N208 G1 Z-148 F500
N209 X667 F1000
N210 X510.15
N211 Y-348.85
N212 X667
N213 G0 Z0
N214 X693.533 Y-259.15
N215 Z-147
N216 G1 Z-148 F500
N217 X667 F1000
N218 X490.15
N219 Y-368.85
N220 X667
N221 G0 Z100
N222 m0

; ploskost 'C' mera
N223 x=670+10+$P_TOOLR y-436 g41
N224 z-45
N225 g1 z-55
N226 x=-10-$P_TOOLR
N227 g0 z50
N228 y-500 g40

; ploskost 'D' mera
N229 x=670+10+$P_TOOLR y-458 g41
N230 z-90
N231 g1 z-93
N232 x=-10-$P_TOOLR
N233 g0 z50
N234 y-500 g40
N235 g0 z100 M5
N236 m9
N237 m0

;MERA otvetstvennih ploskostey
N238 T="FR 160"
N239 M6
N240 D1
N241 M3 S350 F400 G94
N242 G0 X=-$P_TOOLR-10 Y0
N243 Z5 M8
N244 G1 Z0 ;ploskost 'A' mera
N245 X=670+$P_TOOLR+10
N246 G0 Z10
N247 Y-180
N248 Z5 
N249 G1 Z-138 ;ploskost 'F' mera
N250 X=-$P_TOOLR-10
N251 G0 Z100
N252 X=-$P_TOOLR-20 Y=-380
N253 z-40
N254 g1 z-45 ;ploskost 'B' mera
N255 X=670+$P_TOOLR+10
N256 g0 z100
N257 X=670+$P_TOOLR+10 Y=-493-$P_TOOLR
N258 G1 Z-96 ;ploskost 'E' mera
N259 X=-$P_TOOLR-10
N260 G0 Z200 M5
N261 M9
N262 M0

N263 T="FR 20 L130"
N264 M6
N265 D1
N266 M3 S2800 G94 F500
N267 G0 X490 Y-245 M10
;radiusnie ugli karmana 'L'
;cyctre (rtp, Zwork, sdis, trstep,with, string[50] traect)
N268 CYCTRE(150,-148,10,.1,22,"G1 X466")
N269 G0 X490 Y-383
N270 CYCTRE(150,-148,10,.1,22,"G1 X466")
N271 G0 Z100
;stenki karmana 'L' mera
N272 G0 X690 Y-234 OFFN=-.1 G41
N273 Z-148
N274 G1 X465
N275 Y-394
N276 X690
N277 Y=IC(15) G40
N278 G0 Z200 M5
N279 M9
N280 M0

N281 ;sverlovka pod m8
N282 T="SV 6.8"
N283 M6
N284 D1
N285 S2600 M3 G95 F0.22
N286 M8
N287 MCALL CYCLE82(100,-96,1,,-25,1,10,1,21)
N288 OTV6_8: X515 Y-510
N289 X595 Y-510
N290 X635 Y-510
N291 X555 Y-510
N292 X475 Y-510
N293 X435 Y-510
N294 X395 Y-510
N295 X355 Y-510
N296 X315 Y-510
N297 X275 Y-510
N298 X235 Y-510
N299 X195 Y-510
N300 X155 Y-510
N301 X115 Y-510
N302 X75 Y-510
N303 X35 Y-510
N304 OTVE6_8: MCALL
N305 G0 Z200 M5
N306 M9
N307 SUPA Y0
N308 M1

N309 ;FASKI
N310 T="E45X-D06"
N311 M6
N312 D1
N313 S3200 M3 G94 F500
N314 M8
N315 MCALL cfhole(100,1,-96,.7,6.8);RTP,SDIS,Z0,KATET,DOTV
N316 REPEAT OTV6_8 OTVE6_8

N317 MCALL cfhole(100,1,-138,1.1,14);RTP,SDIS,Z0,KATET,DOTV
N318 OTV14: X72.5 Y-145
N319 X147.5 Y-145
N320 X222.5 Y-145
N321 X297.5 Y-145
N322 X372.5 Y-145
N323 X447.5 Y-145
N324 X522.5 Y-145
N325 X597.5 Y-145
N326 OTVE_14: MCALL

N327 MCALL cfhole(100,1,-148,1.1,14);RTP,SDIS,Z0,KATET,DOTV
N328 X513 Y-249
N329 X480 Y-249
N330 MCALL

N331 G0 X292.5 Y-263
N332 CHAMF(-143,.3,2)
N333 REPEAT PAZ25 PAZE25
N334 G0 Z100

N335 G0 X-10 Y10
N336 CHAMF(0,2,1)
N337 G1 Y0 G41
N338 X670
N339 Y-58
N340 X0
N341 Y10
N342 X-10 G40
N343 G0 Z100


N344 Y-390 X-10
N345 CHAMF(-45,0.3,2)
N346 G1 Y-400 G41
N347 X670
N348 G1 Y-436
N349 X0
N350 Y-390
N351 X-10 G40
N352 G0 Z100

N353 X680 Y-468
N354 CHAMF (-55,0.3,2)
N355 G1 Y-458 G41
N356 X-10
N357 Y-468 G40
N358 G0 Z100

N359 X680 Y-503
N360 CHAMF(-93,0.3,2)
N361 G1 Y-493 G41
N362 X-10
N363 Y-503 G40
N364 G0 Z100

N365 X680 Y-540
N366 CHAMF(-96,0.3,2)
N367 G1 Y-530 G41
N368 X-10
N369 Y-540 G40
N370 G0 Z100
N371 M0

N372 T="FSK8"
N373 M6
N374 D1
N375 S3600 M3 G94 F200
N376 M8
;PAZ 25 U STENKI
N377 G0 X292.5 Y-365
N378 CHAMF(-143,.3,3)
N379 REPEAT PAZ25 PAZE25
N380 G0 Z100
N381 M1

N382 MCALL cfhole(100,1,-148,1.1,14);RTP,SDIS,Z0,KATET,DOTV
N383 X513 Y-379
N384 X480 Y-379
N385 MCALL
N386 M1

N387 X-10 Y-100
N388 CHAMF(-138,0.3,1)
N389 G1 Y-108 G41
N390 X670
N391 Y-182
N392 X0
N393 Y-100
N394 X-10 G40
N395 G0 Z100
N396 M1

N397 G0 X680 Y-244
N398 CHAMF(-143,0.3,2) ;FASKA NA KARMAN 2 UHA NEPOLNAYA
N399 G1 Y=-234 G41
N400 G1 X=465
N401 G3 Y=-254 I=AC(465) J=AC(-244)
N402 G1 Y=-376
N403 X=IC(10) G40
N404 G0 Z100
N405 M1

N406 G0 X680 Y-255
N407 CHAMF(-148,0.3,2) ;FASKA NA KARMAN 128x130
N408 G1 Y=-249 G41
N409 X=542 RND=10
N410 Y=-379 RND=10
N411 G1 X=680
N412 Y-370 G40
N413 G0 Z100
N414 M1

N415 G0 X-10 Y-380
N416 CHAMF(-143,0.5,2) ;FASKA SLEVA
N417 G1 X0 G41
N418 Y=-200
N419 X-10 G40
N420 G0 Z100
N421 M0


N422 T="MET M8"
N423 M6
N424 D1
N425 M3 S200
N426 G0 Z200 M8
N427 MCALL CYCLE84(100,-96,1,,-20,0.2,5,,1.25,0,200,200,0,1,0,0,5,1.4,,,,,1001,2001001)
N428 REPEAT OTV6_8 OTVE6_8
N429 G0 Z100 M5
N430 M9
N431 T0 M6
M30

 PAZ25:G1 G91 Y12.5 G41
 G3 Y-25 CR=12.5
 G1 X120
 G3 Y25 CR=12.5
 G1 X-120
 Y-12.5 G40
 PAZE25:G90
;
