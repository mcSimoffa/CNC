G54
N1 WORKPIECE(,"",,"BOX",48,5,-210,-80,-10,10,680,-540)
N2 G64 SOFT COMPON
N3 T="FR 100"
N4 M6
N5 D1
N6 S500 M3 G94 F600
;PLOSKOST Z0 S PRIP
N7 CYCLE61(100,1,2,0,670,0,0,-58,6,70,0.25,500,31,0,1,11000)
N8 M1
;PLOSKOST Z-45
N9 CYCLE61(100,0,2,-45,-15,-400,670,-540,2.5,45,0,500,31,0,1,11000)
N10 M1

;USTUP Z-55
N11 G0 X=670+$P_TOOLR+30 Y=-436-$P_TOOLR
N12 Z10
N13 R1=-45
N14 R2=-55
N15 R3=5
N16 WHILE R1>R2
N17 R1=R1-R3
N18 IF R1<R2
N19    R1=R2
N20 ENDIF
N21 G0 X=670+$P_TOOLR+30 Y=-486-$P_TOOLR
N22 Z=R1+R3
N23 G1 Z=R1
N24 X=-$P_TOOLR-20
N25 G0 Z10
N26 X=670+$P_TOOLR+30 Y=-436-$P_TOOLR
N27 Z=R1+R3
N28 G1 Z=R1
N29 G1 X=-$P_TOOLR-20
N30 G0 Z10
N31 ENDWHILE
N32 G0 Z200
N33 M1

;USTUP Z-93
N34 G0 X=670+$P_TOOLR+30 Y=-436-$P_TOOLR
N35 Z10
N36 R1=-55
N37 R2=-93
N38 R3=3
N39 WHILE R1>R2
N40 R1=R1-R3
N41 IF R1<R2
N42    R1=R2
N43 ENDIF
N44 G0 X=670+$P_TOOLR+30 Y=-458-$P_TOOLR
N45 Z=R1+R3
N46 G1 Z=R1
N47 G1 X=-$P_TOOLR-20
G1 Z=R1+1
N48 ENDWHILE
N49 G0 Z200
N50 M1

;USTUP Z-96 S PRIP
N51 G0 X=670+$P_TOOLR+30 Y=-493-$P_TOOLR
N52 Z=-90
N53 G1 Z=-95.5
N54 X=-$P_TOOLR-20
N55 G0 Z200
N56 M1

;PLOSKOST Z-138
N57 G0 X=670+$P_TOOLR+30 Y=-148
N58 Z=-137.7
N59 G1 X=-$P_TOOLR-20
N60 G0 Z200
N61 M1

N62 T="KUKURUZA 63"
N63 M6
N64 D1
N65 S600 M3 G94 F600

;OBFREZEROVKA VERH
N66 G0 X-20 Y=$P_TOOLR+20 M8
N67 Z10
N68 G1 Z-53
N69 OFFN=0
N70 Y0 G41
N71 G1 X690
N72 Y=$P_TOOLR+10 G40
N73 G0 Z200
N74 M1

;OBFREZEROVKA  NIZ
N75 Y=-530-$P_TOOLR-10
N76 Z10
N77 G1 Z-140
N78 Y-530 G41
N79 X-20
N80 Y=-530-$P_TOOLR-10 G40
N81 G0 Z200
N82 M0


N83 T="FR 50 LONG"
N84 M6
N85 D1
N86 M3 S1300 G94 F1000
;narujnie stenki: sleva vverhu sprava
N88 OFFN=0
N89 R1=0
N90 R2=-145
N92 R3=3
R4=-137
N93 WHILE R1>R2
N94 R1=R1-R3
N95 IF R1<R2
N96    R1=R2
N97 ENDIF
N102 G0 X=-$P_TOOLR-10 Y-550
N103 Z=R1+R3
N104 G1 Z=R1
X0 G41
IF R1>R4
 Y-370
 Y-80 FB=3000
ENDIF
Y0 RND=1
N105 X=670 RND=1
IF R1>R4
 Y-80
 Y-370 FB=3000
ENDIF
Y-550
X=670+$P_TOOLR+10 G40
N106 G0 Z20
N107 ENDWHILE
N108 G0 Z100
N109 M1


;stenka VERH
N87 Y=-58-$P_TOOLR
N88 OFFN=0
N89 R1=0
N90 R2=-138
N91 R3=-143
N92 R4=3
N93 WHILE R1>R3
N94 R1=R1-R4
N95 IF R1<R3
N96    R1=R3
N97 ENDIF
N98 IF (R1<=R2) AND (R4>1) ;STEP DEGRESSIV DOWN R2
N99    R1=R2
N100    R4=1
N101 ENDIF
N102 G0 X=670+$P_TOOLR+10
N103 Z=R1+R4
N104 G1 Z=R1
N105 X=-$P_TOOLR-10
N106 G0 Z10
N107 ENDWHILE
N108 G0 Z100
N109 M1

;stenka NIZ
N110 Y=-400+$P_TOOLR
N111 OFFN=0
N112 R1=-45
N113 R2=-138
N114 R3=-143
N115 R4=3
N116 WHILE R1>R3
N117 R1=R1-R4
N118 IF R1<R3
N119    R1=R3
N120 ENDIF
N121 IF (R1<=R2) AND (R4>1) ;STEP DEGRESSIV DOWN R2
N122    R1=R2
N123    R4=1
N124 ENDIF
N125 G0 X=-$P_TOOLR-10
N126 Z=R1+R4
N127 G1 Z=R1
N128 X=670+$P_TOOLR+10
N129 G0 Z10
N130 ENDWHILE
N131 G0 Z100

M1

;stenka NIZ
G0 X-35 Y35
N110 Y=0+$P_TOOLR
N111 OFFN=0
N112 R1=0
N113 R2=-145
N114 R3=-147
N115 R4=5
N116 WHILE R1>R3
N117 R1=R1-R4
N118 IF R1<R3
N119    R1=R3
N120 ENDIF
N121 IF (R1<=R2) AND (R4>1) ;STEP DEGRESSIV DOWN R2
N122    R1=R2
N123    R4=1
N124 ENDIF
N125 G0 X=-$P_TOOLR-10
N126 Z=R1+R4
N127 G1 Z=R1
N128 X=670+$P_TOOLR+10
N129 G0 Z10
N130 ENDWHILE
N131 G0 Z100

M0
N132 CYCLE61(100,-136,2,-143,670,-182,-10,-360,6,30,0,1000,32,1100,1,11000)

M1

N133 
N134 KARMAN2UHA

N135 M1

N136 
;DNO KARMANA MERA
N137 G0 X693.533 Y-299.15
N138 G1 Z-148 F400
N139 X667 F1000
N140 X530.15
N141 Y-328.85
N142 X667
N143 G0 Z0
N144 X693.533 Y-279.15
N145 Z-147
N146 G1 Z-148 F500
N147 X667 F1000
N148 X510.15
N149 Y-348.85
N150 X667
N151 G0 Z0
N152 X693.533 Y-259.15
N153 Z-147
N154 G1 Z-148 F500
N155 X667 F1000
N156 X490.15
N157 Y-368.85
N158 X667
N159 G0 Z100 M9
N160 M1

;MERA PLOSKOSTEY
N161 T="FR 160"
N162 M6
N163 D1
N164 M3 S350 F400 G94
N165 G0 X=-$P_TOOLR-10 Y0
N166 Z5 M8
N167 G1 Z0
N168 X=670+$P_TOOLR+10
N169 G0 Z10
N170 Y-180
N171 Z5 
N172 G1 Z-138
N173 X=-$P_TOOLR-10
N174 G0 Z100
N175 X=670+$P_TOOLR+10 Y=-493-$P_TOOLR
N176 G1 Z-96
N177 X=-$P_TOOLR-10
N178 G0 Z200
N179 M0

N180 T="FR 20 LONG"
N181 M6
N182 D1
N183 M3 S2500 G94 F500
;PROBIVKA PAZOV KOTORIE NE VSKRILIS
N62 MCALL RASKATKA(50,1,-143,7,21,25.2,6);RTP,SDIS,ZNULL,GLUBINA,DST,DFIN,TURNFACTOR
G0 X412.5 Y-263
X412.5 Y-365
MCALL
MCALL CYCTRE(150,-150,20,.5,25.2,"G1 X292.5")
G0 X412.5 Y-263
X412.5 Y-365
MCALL
N184 G0 X490 Y-245 M10
;cyctre (rtp, Zwork, sdis, trstep,with, string[50] traect)
N185 CYCTRE(150,-148,10,.1,22,"G1 X466")
N186 G0 X490 Y-383
N187 CYCTRE(150,-148,10,.1,22,"G1 X466")
N188 G0 Z100
;STENKI MERA
N189 G0 X690 Y-234 OFFN=-.1 G41
N190 Z-148
N191 G1 X465
N192 Y-394
N193 X690
N194 Y=IC(15) G40
N195 G0 Z200 M9
N196 M0

N197 ;sverlovka pod m8
N198 T="SV 6.8"
N199 M6
N200 D1
N201 S2000 M3 G95 F.18
N202 M8
N203 MCALL CYCLE82(100,-96,1,,-25,1,10,1,21)
N204 OTV6_8: X515 Y-510
N205 X595 Y-510
N206 X635 Y-510
N207 X555 Y-510
N208 X475 Y-510
N209 X435 Y-510
N210 X395 Y-510
N211 X355 Y-510
N212 X315 Y-510
N213 X275 Y-510
N214 X235 Y-510
N215 X195 Y-510
N216 X155 Y-510
N217 X115 Y-510
N218 X75 Y-510
N219 X35 Y-510
N220 OTVE6_8: MCALL
N221 G0 Z200 M9
N222 SUPA Y0
N223 M1

N224 ;FASKI
N225 T="E45X-D06"
N226 M6
N227 D1
N228 S3200 M3 G94 F500
N229 M8
N230 MCALL cfhole(100,1,-96,.7,6.8);RTP,SDIS,Z0,KATET,DOTV
N231 REPEAT OTV6_8 OTVE6_8

N232 MCALL cfhole(100,1,-138,1.1,14);RTP,SDIS,Z0,KATET,DOTV
N233 OTV14: X72.5 Y-145
N234 X147.5 Y-145
N235 X222.5 Y-145
N236 X297.5 Y-145
N237 X372.5 Y-145
N238 X447.5 Y-145
N239 X522.5 Y-145
N240 X597.5 Y-145
N241 OTVE_14: MCALL

N242 MCALL cfhole(100,1,-148,1.1,14);RTP,SDIS,Z0,KATET,DOTV
N243 X513 Y-249
N244 X480 Y-249
N245 MCALL

N246 G0 X292.5 Y-263
N247 CHAMF(-143,.3,2)
N248 REPEAT PAZ25 PAZE25
N249 G0 Z100

N251 G0 X-10 Y10
N252 CHAMF(0,2,1)
N253 G1 Y0 G41
N254 X670
Y-58
X0
Y10
N261 X-10 G40
N262 G0 Z100


N269 Y-390 X-10
N270 CHAMF(-45,0.3,2)
N271 G1 Y-400 G41
N272 X680
N277 G1 Y-436
N278 X0
N279 Y-390
X-10 G40
N280 G0 Z100

N281 X680 Y-468
N282 CHAMF (-55,0.3,2)
N283 G1 Y-458 G41
N284 X-10
N285 Y-468 G40
N286 G0 Z100

N287 X680 Y-503
N288 CHAMF(-93,0.3,2)
N289 G1 Y-493 G41
N290 X-10
N291 Y-503 G40
N292 G0 Z100

N293 X680 Y-540
N294 CHAMF(-96,0.3,2)
N295 G1 Y-530 G41
N296 X-10
N297 Y-540 G40
N298 G0 Z100
N299 M0

N225 T="FSK8"
N226 M6
N227 D1
N228 S3800 M3 G94 F400
N229 M8
;PAZ 25 U STENKI
G0 X292.5 Y-365
CHAMF(-143,.3,3)
REPEAT PAZ25 PAZE25
N250 G0 Z100
M1

N242 MCALL cfhole(100,1,-148,1.1,14);RTP,SDIS,Z0,KATET,DOTV
N243 X513 Y-379
N244 X480 Y-379
N245 MCALL
M1

N263 X-10 Y-100
N264 CHAMF(-138,0.3,1)
N265 G1 Y-108 G41
N266 X670
Y-182
X0
Y-100
N267 X-10 G40
N268 G0 Z100
M1

G0 X680 Y-244
N264 CHAMF(-143,0.3,2) ;FASKA NA KARMAN 2 UHA NEPOLNAYA
G1 Y=-234 G41
G1 X=465
G3 Y=-254 I=AC(465) J=AC(-244)
G1 Y=-376
X=IC(10) G40
G0 Z100
M1

G0 X680 Y-255
N264 CHAMF(-148,0.3,2) ;FASKA NA KARMAN 128x130
G1 Y=-249 G41
X=542 RND=10
Y=-379 RND=10
G1 X=680
Y-370 G40
G0 Z100
M1

G0 X-10 Y-380
N264 CHAMF(-143,0.5,2) ;FASKA SLEVA
G1 X0 G41
Y=-200
X-10 G40
G0 Z100
M0


N300 T="MET4IK M8"
N301 M6
N302 D1
M3 S200
N303 G0 Z200 M8
N304 MCALL CYCLE84(100,-96,1,,-20,0.2,5,,1.25,0,250,250,0,1,0,0,5,1.4,,,,,1001,2001001)
N305 REPEAT OTV6_8 OTVE6_8
N306 G0 Z100 M9
N307 M30

N308 PAZ25:G1 G91 Y12.5 G41
N309 G3 Y-25 CR=12.5
N310 G1 X120
N311 G3 Y25 CR=12.5
N312 G1 X-120
N313 Y-12.5 G40
N314 PAZE25:G90
;
