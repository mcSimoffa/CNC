; T="FR 80 GESAK"
; T="FR 160"
; T="FR 40"
; T="FR 32" ;VILET >97 P290 EPW D32-3-170-W32-18 ISCAR
; T="FR 20 L130"
; T="FR 16 L60"
; T="SV 22.5"
; T="SV 18 L145"; SVERLO=DCN 180-144-25R-8D
; T="SV 18 L210"; SVERLO=DCN 180-216-25R-12D
; T="SV 17.5"
; T="SV 4.3" ;VILET >115 DIAM DERJAVKI <36
; T="FR 16 L4O"
; T="E45X-D06"
; T="FSK8" ;VILET >110 DIAM DERJAVKI <35
; T="REZ FR P2.5"
; T="REZ REZ P2"
; T="MET M5" ;VILET >125 DIAM DERJAVKI <35

N1 G54
N2 WORKPIECE(,"",,"BOX",64,0.5,-250,-80,0,0,885,-170)
 goto N294
N3 T="FR 80 GESAK"
N4 M6
N5 D1
N6 M3 S600 G94 F300
N7 G0 Z200 M8

;FASKA 'J'
N8 G0 X-50 Y-220
N9 Z50 M8
N10 R1=0 R2=-9.9 R3=4
N11 WHILE R1>R2
N12 R1=R1-R3
N13 IF R1<R2
N14   R1=R2
N15 ENDIF
N16 r4=0 r5=665-$P_TOOLR+R1 r6=50
N17 r4=r4-r6
N18 while r4<r5
N19  r4=r4+r6
N20  if r4>r5
N21   r4=r5
N22  endif
N23  g0 x=r4 y-220
N24 Z1
N25  G1 Z=R1
N26  Y20
N27  G0 Z20
N28 endwhile
N29 ENDWHILE
N30 G0 Z200 M5
N31 M9
N32 m0

N33 T="FR 160"
N34 M6
N35 D1
N36 M3 S480 G94 F400
N37 G0 Z200 M8
;TOREC 'B' MERA
N38 CYCLE61(100,-9,2,-10,-5,-180,655,5,5,80,1,500,22,10,1,11010)
;TOREC 'A' MERA
N39 CYCLE61(100,1,2,0,650,-180,900,5,5,80,1,500,22,0,1,11010)
N40 G0 Z200 M5
N41 M9
N42 M0


N43 T="FR 40"
N44 M6
N45 D1
N46 M3 S1600 G94 F600
; USTUP 'E'
N47 CYCLE61(100,-10,2,-13,-5,-180,15,5,5,60,0,600,21,10,1,11010)
N48 OFFN=0
;USTUP 'D'
N49 USTD:
N50 G0 X192 Y40
N51 Z-13 M8
N52 X145 G41 
N53 G1 Y=-125 RND=20
N54 G1 X239 RND=20
N55 G1 Y40
N56 X192 G40
N57 G0 Z100 
N58 USTDE:
N59 M5
N60 M9
N61 M0


N62 T="FR 32" ;VILET >97 P290 EPW D32-3-170-W32-18 ISCAR
N63 M6
N64 D1
N65 M3 S1600 G94 F800
N66 G0 Z100 M8
N67 r1=0 r2=-54.5 r3=14.5
;PAZ 'F' probivka
N68 WHILE R1>R2
N69  R1=R1-R3
N70  IF R1<R2
N71    R1=R2
N72  ENDIF
N73  G0 X913 Y-74
  ;cyctre (rtp, Zwork, sdis, trstep,with, string[50] traect)
N74  CYCTRE(50,R1,-R1+1,2,55,"G1 X715")
N75 ENDWHILE
N76 m1

;PAZ 'C' probivka i dorabotka radiusov do R=20
N77 r1=-10 r2=-104.7 r3=14
N78 WHILE R1>R2
N79  R1=R1-R3
N80  IF R1<R2
N81    R1=R2
N82  ENDIF
N83  G0 X192 Y38
  ;cyctre (rtp, Zwork, sdis, trstep,with, string[50] traect)
N84  CYCTRE(50,R1,-R1+1,2,74,"G1 y-78")
N85  g0 X192 y-78
N86  cycang(50,-10,r1,20,1,"g1 X175 y-95");rtp,Zhigh,Zlow,rad,step,move
N87  g0 X192 y-78
N88  cycang(50,-10,r1,20,1,"g1 X209 y-95");rtp,Zhigh,Zlow,rad,step,move
N89 ENDWHILE
N90 m1

;dno paza 'F' mera
N91 OFFN=0
N92 r1=-55
N93 fcontur:
N94 G0 X=885+$P_TOOLR+10 Y=-46.5-$P_TOOLR-10
N95 G1 Z=r1
N96 Y-46.5 G41 
N97 X715
N98 G3 Y-101.5 CR=27.5
N99 G1 X890
N100 Y=-74 Z=IC(2) G40
N101 fconture:
N102 G0 Z100
N103 M1

;dorabotka uglov karmana 'D'
N104 g0 X172 y-98
N105 cycang(50,-10,-13,20,1,"g1 X165 Y-105");rtp,Zhigh,Zlow,rad,step,move
N106 g0 X212 y-98
N107 cycang(50,-10,-13,20,1,"g1 X219 Y-105")
N108 m1

;dno paza 'C' mera
N109 OFFN=15
N110 r1=-105 R5=20
N111 f300
N112 ckontur:
N113 G0 X=192 Y40
N114 G1 Z=r1
N115 X155 G41 
N116 Y-115 rnd=R5
N117 x229 rnd=R5
N118 Y=$P_TOOLR+10
N119 X192 G40
N120 ckonture:
N121 offn=1
N122 repeat ckontur ckonture
N123 G0 Z200 M5
N124 M9
N125 M0


N126 T="FR 20 L130" ;VILET>100
N127 M6
N128 D1
N129 M3 S2800 G94 F1000
N130 G0 Z200 M8
;DORABITKA UGLA NA R=10 i mera stenki KARMANA 'C'
N131 R1=-13 R2=-105 R3=10 R5=10
N132 WHILE R1>R2
N133   R1=R1-R3
N134   IF R1<R2
N135     R1=R2
N136   ENDIF
N137  g0 X175 Y-95
N138  cycang(50,1,R1,10.15,0.5,"g1 X165 Y-105");rtp,Zhigh,Zlow,rad,step,move
N139  g0 X209 Y-95
N140  cycang(50,1,R1,10.15,0.5,"g1 X219 Y-105")
N141  offn=-.15
N142  repeat ckontur ckonture
N143  g0 z50
N144 ENDWHILE
N145 G0 Z200 M5
N146 M9
N147 M0


N148 T="FR 16 L60"
N149 M6
N150 D1
N151 M3 S2800 G94 F600
N152 G0 Z200
;mera stenki karmana 'F'
N153 r1=0 r2=-55 r3=30
N154 offn=-.1
N155 WHILE R1>R2
N156  R1=R1-R3
N157  IF R1<R2
N158    R1=R2
N159  ENDIF
N160  repeat fcontur fconture
N161 ENDWHILE
N162 g0 z200 M5
N163 m9
N164 m0


N165 T="SV 22.5"
N166 M6
N167 D1
N168 M3 S2600 G95 F0.26 M10
;8 OTV D18. ZASVERLOVKA POD REZBU 
N169 MCALL CYCLE82(100,-10,1,-41,,1,10,1,22)
N170 REPEAT OTV18 OTVE18
N171 M5
N172 M9
N173 M0


N174 T="SV 18 L145"; SVERLO=DCN 180-144-25R-8D
N175 M6
N176 D1
N177 M3 S2600 G95 F0.26 
N178 G0 Z200 M10
;8 OTV D18 PILOTNOE OTV
N179 MCALL CYCLE82(100,-45,1,-100,,1,10,1,22)
N180 OTV18:G0 X=275 Y=-19
N181 X=275 Y=-101
N182 X=337 Y=-101
N183 X=337 Y=-19
N184 X=444 Y=-19
N185 X=444 Y=-101
N186 X=506 Y=-101
N187 X=506 Y=-19
N188 OTVE18: MCALL
N189 M5
N190 M9
N191 M0


N192 T="SV 18 L210" ; SVERLO=DCN 180-216-25R-12D
N193 M6
N194 D1
N195 M3 S2600 G95 F0.26 M10
;8 OTV D18. DO DNA 
N196 MCALL CYCLE82(100,-45,1,-213,,5,0,1,22)
N197 REPEAT OTV18 OTVE18
N198 M5
N199 M9
N200 M0


N201 T="SV 17.5"
N202 M6
N203 D1
N204 M3 S2600 G95 F0.26 M10
;2 OTV M20
N205 MCALL CYCLE82(100,-55,1,-100,,1,10,1,22)
N206 OTVM20: G0 X759 Y-74
N207 X835 Y-74
N208 OTVEM20: MCALL
N209 M9
N210 M0


N211 T="SV 4.3" ;VILET >115 DIAM DERJAVKI <36
N212 M6
N213 D1
N214 M3 S700 G95 F0.08 M10
;4 OTV M5
N215 MCALL CYCLE82(100,-105,1,,-17,1,10,1,21)
N216 OTVM5: G0 X=173 Y=-30
N217 X=211
N218 Y=-40
N219 X=173
N220 OTVEM5:MCALL
N221 G0 Z200 M5
N222 M9
N223 M0


N224 T="FR 16 L40"
N225 M6
N226 D1
N227 M3 S2800 G94 F1000 M10
;8 OTV D18. POTAY D30
;RASKATKA(RTP,SDIS, ZNULL, GLUBINA, DST, DFIN,TURNFACTOR)
N228 MCALL RASKATKA(100,1,-10,4,22,30.2,8)
N229 REPEAT OTV18 OTVE18
N230 repeat USTD USTDE
N231 M5
N232 M9
N233 M0


N234 T="E45X-D06"
N235 M6
N236 D1
N237 M3 S3600 G94 F600
N238 G0 Z200 M8
;faska vdol 'E'
N239 G0 X-10 Y-180
N240 CHAMF(-13,.5,1.5) ;Z0;KATET,DEBT
N241 G1 X0  G41
N242 Y10
N243 X-10 G40
N244 G0 Z50

;FASKA 1
N245 X0 Y-180
N246 CHAMF(-10,.5,1.5) ;Z0;KATET,DEBT
N247 G1 x15 g41
N248 y0
N249 X=145
N250 Y=-125 rnd=20
N251 X=239 rnd=20
N252 G1 Y=0
N253 X=640
N254 y10 g40
N255 g0 z100

;FASKA 2
N256 G0 X640 Y10
N257 CHAMF(0,.5,1.5) ;Z0;KATET,DEBT
N258 G1 y0 g41
N259 x=885
N260 Y=-46.5
N261 X=715
N262 G3 Y=-101.5 I=AC(715) J=AC(-74)
N263 G1 X=885
N264 Y=-130
N265 x895 g40
N266 g0 z50

;FASKA 3 (Z-13)
N267 G0 X165 Y10
N268 CHAMF(-13,.5,1.5) ;Z0;KATET,DEBT
N269 G1 X155 G41
N270 Y=-115 RND=10
N271 X=229 RND=10
N272 Y10
N273 X219 G40
N274 G0 Z50

N275 mcall cfhole(50,1,-10,.5,30);RTP,SDIS,ZNULL,KATET,DOTV
N276 REPEAT OTV18 OTVE18
N277 mcall cfhole(50,1,-14,1,22.5);RTP,SDIS,ZNULL,KATET,DOTV
N278 REPEAT OTV18 OTVE18
N279 G0 Z200 M5
N280 M9
N281 M0


N282 T="FSK8" ;VILET >110 DIAM DERJAVKI <35
N283 M6
N284 D1
N285 M3 S3800 G94 F300
N286 G0 Z200 M10
N287 mcall cfhole(50,1,-55,1.6,17.5);RTP,SDIS,ZNULL,KATET,DOTV
N288 REPEAT OTVM20 OTVEM20

N289 mcall cfhole(50,1,-105,.5,4.3);RTP,SDIS,ZNULL,KATET,DOTV
N290 REPEAT OTVM5 OTVEM5
N291 G0 Z100 M5
N292 M9
N293 M0


N294 T="REZ FR P2.5"
N295 M6
N296 D1
N297 M3 S3300 G94 F1200 M10
N298 MCALL CYCLE70(100,-55,1,-96,20.15,1.25,0,2.5,1,0.4,960,0,25,-140,0,11,1,,,,,1,0)
N299 REPEAT OTVM20 OTVEM20
N300 G0 Z200 M5
N301 M9
N302 M0


N303 T="REZ REZ P2"
N304 M6
N305 D1
N306 M3 S3600 G94 F1200 M10
N307 MCALL CYCLE70(100,-14,1,-35,24.1,0.7,0,1.5,1,0.2,720,0,25,-140,0,11,1,,,,,1,0)
N308 REPEAT OTV18 OTVE18
N309 G0 Z200 M9
N310 M0

N311 T="MET M5" ;VILET >125 DIAM DERJAVKI <35
N312 M6
N313 D1
N314 M3 S200 G95 F0.8
N315 MCALL CYCLE84(100,-105,1,,-12,0.5,5,,0.8,0,200,200,0,1,0,0,5,1.4,,,,,1001,2001001)
N316 REPEAT OTVM5 OTVEM5
N317 G0 Z200 M5
N318 M9

N319 M30
